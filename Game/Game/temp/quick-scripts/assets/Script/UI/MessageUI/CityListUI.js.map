{"version":3,"sources":["CityListUI.js"],"names":["BaseUI","require","ScrollViewTool","cc","Class","extends","properties","_uiName","_cityListNodePool","_cityListNScrollViewNode","_cityListNScrollViewTmpNode","onLoad","_super","onButtonClick","name","node","component","hide","_city_id","g_GameData","setData","g_GameSceneManager","addNode","g_GAME_SCENE_UI_NODE","undefined","onUIInit","NodePool","find","onShow","gameData","g_GameGlobalManager","forceId","getData","cityArr","getForceById","_cityArr","buildScrollView","SCROLL_TYPE_VERTICAL","childNode","data","getComponent","Label","string","_name","getChildByName","_id","bind","buttonTravelRegister","deleteFlag","onDestroy"],"mappings":";;;;;;AAAA;AACA;;;;AAIA,IAAIA,SAASC,QAAQ,QAAR,CAAb;AACA,IAAIC,iBAAiBD,QAAQ,gBAAR,CAArB;AACAE,GAAGC,KAAH,CAAS;AACLC,aAASL,MADJ;;AAGLM,gBAAY;AACRC,iBAAS,YADD;AAERC,2BAAmB,IAFX;AAGRC,kCAA0B,IAHlB;AAIRC,qCAA6B;AAJrB,KAHP;;AAULC,UAVK,oBAUI;AACL,aAAKC,MAAL;AACH,KAZI;;;AAcL;;;AAGAC,mBAAe,uBAAUC,IAAV,EAAgBC,IAAhB,EAAsBC,SAAtB,EAAiC;AAC5C,gBAAQF,IAAR;AACI,iBAAK,MAAL;AACI,qBAAKG,IAAL,CAAU,KAAV;AACA;AACJ,iBAAK,QAAL;AACI,oBAAIF,KAAKG,QAAT,EAAmB;AACfC,+BAAWC,OAAX,CAAmB,cAAnB,EAAmCL,KAAKG,QAAxC;AACAG,uCAAmBC,OAAnB,CAA2B,yBAA3B,EAAsDC,oBAAtD,EAA4E,cAA5E,EACI,KADJ,EACWC,SADX,EACsBA,SADtB,EACiC,GADjC;AAEH;AACD;AAVR;AAYH,KA9BI;;AAgCL;;;;AAIAC,cAAU,oBAAY;AAClB,aAAKb,MAAL;AACA,aAAKJ,iBAAL,GAAyB,IAAIL,GAAGuB,QAAP,EAAzB;AACA,aAAKjB,wBAAL,GAAgCN,GAAGwB,IAAH,CAAQ,gBAAR,EAA0B,KAAKZ,IAA/B,CAAhC;AACA,aAAKL,2BAAL,GAAmCP,GAAGwB,IAAH,CAAQ,mBAAR,EAA6B,KAAKlB,wBAAlC,CAAnC;AACH,KAzCI;;AA2CL;;;;AAIAmB,YAAQ,kBAAY;AAChB,aAAKhB,MAAL;AACA,YAAIiB,WAAWC,oBAAoBD,QAAnC;AACA,YAAIE,UAAUZ,WAAWa,OAAX,CAAmB,eAAnB,CAAd;AACA,YAAIC,UAAUJ,SAASK,YAAT,CAAsBH,OAAtB,EAA+BI,QAA7C;AACA;AACAjC,uBAAekC,eAAf,CAA+B,KAAK3B,wBAApC,EAA8DP,eAAemC,oBAA7E,EACI,KAAK3B,2BADT,EACsC,UAAU4B,SAAV,EAAqBC,IAArB,EAA2B;AACzDpC,eAAGwB,IAAH,CAAQ,iBAAR,EAA2BW,SAA3B,EAAsCE,YAAtC,CAAmDrC,GAAGsC,KAAtD,EAA6DC,MAA7D,GAAsEH,KAAKI,KAA3E;AACAL,sBAAUM,cAAV,CAAyB,QAAzB,EAAmC1B,QAAnC,GAA8CqB,KAAKM,GAAnD;AACH,SAHiC,CAGhCC,IAHgC,CAG3B,IAH2B,CADtC,EAIkBb,OAJlB,EAI2B,KAAKzB,iBAJhC;AAKA,aAAKuC,oBAAL,CAA0B,KAAKhC,IAA/B;AACH,KA3DI;;AA6DL;;;;AAIAE,UAAM,cAAU+B,UAAV,EAAsB;AACxB,aAAKpC,MAAL,CAAYoC,UAAZ;AACH,KAnEI;;AAqEL;;;;AAIAC,eAAW,qBAAY;AACnB,aAAKrC,MAAL;AACH;AA3EI,CAAT","file":"CityListUI.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\MessageUI","sourcesContent":["/*global module, require, cc, client */\r\n/**\r\n * @desc\r\n * @author Administrator\r\n */\r\nvar BaseUI = require('BaseUI');\r\nvar ScrollViewTool = require('ScrollViewTool');\r\ncc.Class({\r\n    extends: BaseUI,\r\n\r\n    properties: {\r\n        _uiName: 'CityListUI',\r\n        _cityListNodePool: null,\r\n        _cityListNScrollViewNode: null,\r\n        _cityListNScrollViewTmpNode: null\r\n    },\r\n\r\n    onLoad() {\r\n        this._super();\r\n    },\r\n\r\n    /**\r\n     * 实现方法，点击回调\r\n     */\r\n    onButtonClick: function (name, node, component) {\r\n        switch (name) {\r\n            case 'hide':\r\n                this.hide(false);\r\n                return;\r\n            case 'button':\r\n                if (node._city_id) {\r\n                    g_GameData.setData('show_city_id', node._city_id);\r\n                    g_GameSceneManager.addNode('Prefab/Msg/PersonListUI', g_GAME_SCENE_UI_NODE, 'PersonListUI',\r\n                        false, undefined, undefined, 100);\r\n                }\r\n                break;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * UI界面显示\r\n     * @constructor\r\n     */\r\n    onUIInit: function () {\r\n        this._super();\r\n        this._cityListNodePool = new cc.NodePool();\r\n        this._cityListNScrollViewNode = cc.find('Mid/scrollview', this.node);\r\n        this._cityListNScrollViewTmpNode = cc.find('view/content/item', this._cityListNScrollViewNode);\r\n    },\r\n\r\n    /**\r\n     * UI界面显示\r\n     * @constructor\r\n     */\r\n    onShow: function () {\r\n        this._super();\r\n        let gameData = g_GameGlobalManager.gameData;\r\n        let forceId = g_GameData.getData('show_force_id');\r\n        let cityArr = gameData.getForceById(forceId)._cityArr;\r\n        //显示list\r\n        ScrollViewTool.buildScrollView(this._cityListNScrollViewNode, ScrollViewTool.SCROLL_TYPE_VERTICAL,\r\n            this._cityListNScrollViewTmpNode, function (childNode, data) {\r\n                cc.find('button/cityName', childNode).getComponent(cc.Label).string = data._name;\r\n                childNode.getChildByName('button')._city_id = data._id;\r\n            }.bind(this), cityArr, this._cityListNodePool);\r\n        this.buttonTravelRegister(this.node);\r\n    },\r\n\r\n    /**\r\n     * UI隐藏\r\n     * @constructor\r\n     */\r\n    hide: function (deleteFlag) {\r\n        this._super(deleteFlag);\r\n    },\r\n\r\n    /**\r\n     * UI销毁\r\n     * @constructor\r\n     */\r\n    onDestroy: function () {\r\n        this._super();\r\n    }\r\n});\r\n"]}
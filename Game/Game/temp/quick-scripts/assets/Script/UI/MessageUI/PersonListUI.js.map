{"version":3,"sources":["PersonListUI.js"],"names":["BaseUI","require","ScrollViewTool","cc","Class","extends","properties","_uiName","_personListNodePool","_personListNScrollViewNode","_personListNScrollViewTmpNode","onLoad","_super","onButtonClick","name","node","component","hide","_city_id","g_GameData","setData","g_GameSceneManager","addNode","g_GAME_SCENE_UI_NODE","undefined","onUIInit","NodePool","find","onShow","gameData","g_GameGlobalManager","cityId","getData","personArr","getCityById","_personArr","buildScrollView","SCROLL_TYPE_VERTICAL","childNode","data","getComponent","Label","string","_name","getChildByName","_person_id","_id","bind","buttonTravelRegister","deleteFlag","onDestroy"],"mappings":";;;;;;AAAA;AACA;;;;AAIA,IAAIA,SAASC,QAAQ,QAAR,CAAb;AACA,IAAIC,iBAAiBD,QAAQ,gBAAR,CAArB;AACAE,GAAGC,KAAH,CAAS;AACLC,aAASL,MADJ;;AAGLM,gBAAY;AACRC,iBAAS,cADD;AAERC,6BAAqB,IAFb;AAGRC,oCAA4B,IAHpB;AAIRC,uCAA+B;AAJvB,KAHP;;AAULC,UAVK,oBAUI;AACL,aAAKC,MAAL;AACH,KAZI;;;AAcL;;;AAGAC,mBAAe,uBAAUC,IAAV,EAAgBC,IAAhB,EAAsBC,SAAtB,EAAiC;AAC5C,gBAAQF,IAAR;AACI,iBAAK,MAAL;AACI,qBAAKG,IAAL,CAAU,KAAV;AACA;AACJ,iBAAK,QAAL;AACI,oBAAIF,KAAKG,QAAT,EAAmB;AACfC,+BAAWC,OAAX,CAAmB,cAAnB,EAAmCL,KAAKG,QAAxC;AACAG,uCAAmBC,OAAnB,CAA2B,uBAA3B,EAAoDC,oBAApD,EAA0E,YAA1E,EACI,KADJ,EACWC,SADX,EACsBA,SADtB,EACiC,GADjC;AAEH;AACD;AAVR;AAYH,KA9BI;;AAgCL;;;;AAIAC,cAAU,oBAAY;AAClB,aAAKb,MAAL;AACA,aAAKJ,mBAAL,GAA2B,IAAIL,GAAGuB,QAAP,EAA3B;AACA,aAAKjB,0BAAL,GAAkCN,GAAGwB,IAAH,CAAQ,gBAAR,EAA0B,KAAKZ,IAA/B,CAAlC;AACA,aAAKL,6BAAL,GAAqCP,GAAGwB,IAAH,CAAQ,mBAAR,EAA6B,KAAKlB,0BAAlC,CAArC;AACH,KAzCI;;AA2CL;;;;AAIAmB,YAAQ,kBAAY;AAChB,aAAKhB,MAAL;AACA,YAAIiB,WAAWC,oBAAoBD,QAAnC;AACA,YAAIE,SAASZ,WAAWa,OAAX,CAAmB,cAAnB,CAAb;AACA,YAAIC,YAAYJ,SAASK,WAAT,CAAqBH,MAArB,EAA6BI,UAA7C;AACA;AACAjC,uBAAekC,eAAf,CAA+B,KAAK3B,0BAApC,EAAgEP,eAAemC,oBAA/E,EACI,KAAK3B,6BADT,EACwC,UAAU4B,SAAV,EAAqBC,IAArB,EAA2B;AAC3DpC,eAAGwB,IAAH,CAAQ,mBAAR,EAA6BW,SAA7B,EAAwCE,YAAxC,CAAqDrC,GAAGsC,KAAxD,EAA+DC,MAA/D,GAAwEH,KAAKI,KAA7E;AACAL,sBAAUM,cAAV,CAAyB,QAAzB,EAAmCC,UAAnC,GAAgDN,KAAKO,GAArD;AACH,SAHmC,CAGlCC,IAHkC,CAG7B,IAH6B,CADxC,EAIkBd,SAJlB,EAI6B,KAAKzB,mBAJlC;AAKA,aAAKwC,oBAAL,CAA0B,KAAKjC,IAA/B;AACH,KA3DI;;AA6DL;;;;AAIAE,UAAM,cAAUgC,UAAV,EAAsB;AACxB,aAAKrC,MAAL,CAAYqC,UAAZ;AACH,KAnEI;;AAqEL;;;;AAIAC,eAAW,qBAAY;AACnB,aAAKtC,MAAL;AACH;AA3EI,CAAT","file":"PersonListUI.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\UI\\MessageUI","sourcesContent":["/*global module, require, cc, client */\r\n/**\r\n * @desc\r\n * @author Administrator\r\n */\r\nvar BaseUI = require('BaseUI');\r\nvar ScrollViewTool = require('ScrollViewTool');\r\ncc.Class({\r\n    extends: BaseUI,\r\n\r\n    properties: {\r\n        _uiName: 'PersonListUI',\r\n        _personListNodePool: null,\r\n        _personListNScrollViewNode: null,\r\n        _personListNScrollViewTmpNode: null\r\n    },\r\n\r\n    onLoad() {\r\n        this._super();\r\n    },\r\n\r\n    /**\r\n     * 实现方法，点击回调\r\n     */\r\n    onButtonClick: function (name, node, component) {\r\n        switch (name) {\r\n            case 'hide':\r\n                this.hide(false);\r\n                return;\r\n            case 'button':\r\n                if (node._city_id) {\r\n                    g_GameData.setData('show_city_id', node._city_id);\r\n                    g_GameSceneManager.addNode('Prefab/Msg/CityListUI', g_GAME_SCENE_UI_NODE, 'CityListUI',\r\n                        false, undefined, undefined, 100);\r\n                }\r\n                break;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * UI界面显示\r\n     * @constructor\r\n     */\r\n    onUIInit: function () {\r\n        this._super();\r\n        this._personListNodePool = new cc.NodePool();\r\n        this._personListNScrollViewNode = cc.find('Mid/scrollview', this.node);\r\n        this._personListNScrollViewTmpNode = cc.find('view/content/item', this._personListNScrollViewNode);\r\n    },\r\n\r\n    /**\r\n     * UI界面显示\r\n     * @constructor\r\n     */\r\n    onShow: function () {\r\n        this._super();\r\n        let gameData = g_GameGlobalManager.gameData;\r\n        let cityId = g_GameData.getData('show_city_id');\r\n        let personArr = gameData.getCityById(cityId)._personArr;\r\n        //显示list\r\n        ScrollViewTool.buildScrollView(this._personListNScrollViewNode, ScrollViewTool.SCROLL_TYPE_VERTICAL,\r\n            this._personListNScrollViewTmpNode, function (childNode, data) {\r\n                cc.find('button/personName', childNode).getComponent(cc.Label).string = data._name;\r\n                childNode.getChildByName('button')._person_id = data._id;\r\n            }.bind(this), personArr, this._personListNodePool);\r\n        this.buttonTravelRegister(this.node);\r\n    },\r\n\r\n    /**\r\n     * UI隐藏\r\n     * @constructor\r\n     */\r\n    hide: function (deleteFlag) {\r\n        this._super(deleteFlag);\r\n    },\r\n\r\n    /**\r\n     * UI销毁\r\n     * @constructor\r\n     */\r\n    onDestroy: function () {\r\n        this._super();\r\n    }\r\n});\r\n"]}
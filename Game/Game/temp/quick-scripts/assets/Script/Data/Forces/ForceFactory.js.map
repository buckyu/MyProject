{"version":3,"sources":["ForceFactory.js"],"names":["outModule","local","CityFactory","require","buildFunc","force","getSaveData","id","_id","cityArr","_cityArr","map","oneForceData","createOneForceBySaveData","saveData","jsonData","g_JsonDataTool","getDataById","_name","name","cityId","g_GameGlobalManager","gameData","getCityById","createOneForce","forceId","parseInt","city","split","createOneCity","undefined","module","exports"],"mappings":";;;;;;AAAA;;;AAGA,IAAIA,YAAY,EAAhB;AACA,IAAIC,QAAQ,EAAZ;AACA,IAAIC,cAAcC,QAAQ,aAAR,CAAlB;;AAEA;;;AAGAF,MAAMG,SAAN,GAAkB,UAAUC,KAAV,EAAiB;AAC/B;AACAA,UAAMC,WAAN,GAAoB,YAAY;AAC5B,eAAO;AACHC,gBAAIF,MAAMG,GADP;AAEHC,qBAASJ,MAAMK,QAAN,CAAeC,GAAf,CAAmB,UAAUC,YAAV,EAAwB;AAChD,uBAAOA,aAAaJ,GAApB;AACH,aAFQ;AAFN,SAAP;AAMH,KAPD;AAQH,CAVD;;AAYA;;;AAGAP,MAAMY,wBAAN,GAAiC,UAAUC,QAAV,EAAoB;AACjD,SAAKN,GAAL,GAAWM,SAASP,EAApB;AACA;AACA,QAAIQ,WAAWC,eAAeC,WAAf,CAA2B,oBAA3B,EAAiD,KAAKT,GAAtD,CAAf;AACA;AACA,SAAKU,KAAL,GAAaH,SAASI,IAAtB;AACAlB,UAAMG,SAAN,CAAgB,IAAhB;AACA;AACA,SAAKM,QAAL,GAAgBI,SAASL,OAAT,CAAiBE,GAAjB,CAAqB,UAACS,MAAD,EAAY;AAC7C,eAAOC,oBAAoBC,QAApB,CAA6BC,WAA7B,CAAyCH,MAAzC,CAAP;AACH,KAFe,CAAhB;AAGH,CAXD;;AAaA;;;;AAIAnB,MAAMuB,cAAN,GAAuB,UAAUC,OAAV,EAAmB;;AAEtC,SAAKjB,GAAL,GAAWkB,SAASD,OAAT,CAAX;AACA;AACA,QAAIV,WAAWC,eAAeC,WAAf,CAA2B,oBAA3B,EAAiDQ,OAAjD,CAAf;AACA;AACA,SAAKP,KAAL,GAAaH,SAASI,IAAtB;;AAEAlB,UAAMG,SAAN,CAAgB,IAAhB;;AAEA;AACA,SAAKM,QAAL,GAAgB,CAAC,KAAKK,SAASY,IAAf,EAAqBC,KAArB,CAA2B,GAA3B,EAAgCjB,GAAhC,CAAoC,UAACS,MAAD,EAAY;AAC5D,eAAOlB,YAAY2B,aAAZ,CAA0BT,MAA1B,EAAkCU,SAAlC,CAAP;AACH,KAFe,CAAhB;AAGH,CAdD;;AAgBA;;;;AAIA9B,UAAUwB,cAAV,GAA2B,UAACC,OAAD,EAAUX,QAAV,EAAuB;AAC9C,QAAIA,QAAJ,EAAc;AACV,eAAO,IAAIb,MAAMY,wBAAV,CAAmCC,QAAnC,CAAP;AACH;AACD,WAAO,IAAIb,MAAMuB,cAAV,CAAyBC,OAAzB,CAAP;AACH,CALD;;AAOAM,OAAOC,OAAP,GAAiBhC,SAAjB","file":"ForceFactory.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Data\\Forces","sourcesContent":["/**\r\n * 割据势力数据工厂\r\n */\r\nvar outModule = {};\r\nvar local = {};\r\nvar CityFactory = require('CityFactory');\r\n\r\n/**\r\n * @param force 为割据数据绑定相应的函数\r\n */\r\nlocal.buildFunc = function (force) {\r\n    //获取存储的数据\r\n    force.getSaveData = function () {\r\n        return {\r\n            id: force._id,\r\n            cityArr: force._cityArr.map(function (oneForceData) {\r\n                return oneForceData._id;\r\n            }),\r\n        }\r\n    };\r\n};\r\n\r\n/**\r\n * @param saveData 存储的数据\r\n */\r\nlocal.createOneForceBySaveData = function (saveData) {\r\n    this._id = saveData.id;\r\n    //配置数据\r\n    var jsonData = g_JsonDataTool.getDataById('_table_force_force', this._id);\r\n    //势力名字\r\n    this._name = jsonData.name;\r\n    local.buildFunc(this);\r\n    //割据势力所属的城市\r\n    this._cityArr = saveData.cityArr.map((cityId) => {\r\n        return g_GameGlobalManager.gameData.getCityById(cityId);\r\n    });\r\n};\r\n\r\n/**\r\n * @param forceId 割据势力id\r\n * 新建一个割据势力数据\r\n */\r\nlocal.createOneForce = function (forceId) {\r\n\r\n    this._id = parseInt(forceId);\r\n    //配置数据\r\n    var jsonData = g_JsonDataTool.getDataById('_table_force_force', forceId);\r\n    //势力名字\r\n    this._name = jsonData.name;\r\n\r\n    local.buildFunc(this);\r\n\r\n    //割据势力所属的城市\r\n    this._cityArr = ('' + jsonData.city).split(',').map((cityId) => {\r\n        return CityFactory.createOneCity(cityId, undefined);\r\n    });\r\n};\r\n\r\n/**\r\n * @param cityId\r\n * @param saveData \r\n */\r\noutModule.createOneForce = (forceId, saveData) => {\r\n    if (saveData) {\r\n        return new local.createOneForceBySaveData(saveData);\r\n    }\r\n    return new local.createOneForce(forceId);\r\n};\r\n\r\nmodule.exports = outModule;"]}
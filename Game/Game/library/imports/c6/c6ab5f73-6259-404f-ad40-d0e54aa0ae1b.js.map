{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Module\\Manager\\BattleManager/assets\\Script\\Module\\Manager\\BattleManager\\BattleManager.js"],"names":["outModule","local","BattleFactory","require","timeSave","battleArr","startBattle","person_1","person_2","startBattleCb","battle","buildOneBattle","push","timeUpdate","addMinutes","g_GlobalData","BATTLE_TIMER_TIME","newArr","forEach","oneBattle","result","module","exports"],"mappings":";;;;;;AAAA;;;AAGA,IAAIA,YAAY,EAAhB;AACA,IAAIC,QAAQ,EAAZ;AACA,IAAIC,gBAAgBC,QAAQ,eAAR,CAApB;;AAEAF,MAAMG,QAAN,GAAiB,CAAjB;AACAH,MAAMI,SAAN,GAAkB,EAAlB;;AAEAL,UAAUM,WAAV,GAAwB,UAAUC,QAAV,EAAoBC,QAApB,EAA8B;AAClDD,aAASE,aAAT;AACAD,aAASC,aAAT;AACA,QAAIC,SAAS,IAAIR,cAAcS,cAAlB,CAAiCJ,QAAjC,EAA2CC,QAA3C,CAAb;AACAP,UAAMI,SAAN,CAAgBO,IAAhB,CAAqBF,MAArB;AACH,CALD;;AAOAV,UAAUa,UAAV,GAAuB,UAAUC,UAAV,EAAsB;AACzCb,UAAMG,QAAN,GAAiBH,MAAMG,QAAN,GAAiBU,UAAlC;AACA,QAAIb,MAAMG,QAAN,IAAkBW,aAAaC,iBAAnC,EAAsD;AAClDf,cAAMG,QAAN,GAAiBH,MAAMG,QAAN,GAAiBW,aAAaC,iBAA/C;AACA,YAAIC,SAAS,EAAb;AACAhB,cAAMI,SAAN,CAAgBa,OAAhB,CAAwB,UAAUC,SAAV,EAAqB;AACzC,gBAAIC,SAASD,UAAUN,UAAV,EAAb;AACA,gBAAI,CAACO,MAAL,EAAa;AACT;AACAH,uBAAOL,IAAP,CAAYO,SAAZ;AACH;AACJ,SAND;AAOAlB,cAAMI,SAAN,GAAkBY,MAAlB;AACH;AACJ,CAdD;;AAgBAI,OAAOC,OAAP,GAAiBtB,SAAjB","file":"BattleManager.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\Script\\Module\\Manager\\BattleManager","sourcesContent":["/**\r\n * 战斗管理器\r\n */\r\nvar outModule = {};\r\nvar local = {};\r\nvar BattleFactory = require('BattleFactory');\r\n\r\nlocal.timeSave = 0;\r\nlocal.battleArr = [];\r\n\r\noutModule.startBattle = function (person_1, person_2) {\r\n    person_1.startBattleCb();\r\n    person_2.startBattleCb();\r\n    let battle = new BattleFactory.buildOneBattle(person_1, person_2);\r\n    local.battleArr.push(battle);\r\n};\r\n\r\noutModule.timeUpdate = function (addMinutes) {\r\n    local.timeSave = local.timeSave + addMinutes;\r\n    if (local.timeSave >= g_GlobalData.BATTLE_TIMER_TIME) {\r\n        local.timeSave = local.timeSave - g_GlobalData.BATTLE_TIMER_TIME;\r\n        let newArr = [];\r\n        local.battleArr.forEach(function (oneBattle) {\r\n            let result = oneBattle.timeUpdate();\r\n            if (!result) {\r\n                //表示战斗还没有结束\r\n                newArr.push(oneBattle);\r\n            }\r\n        });\r\n        local.battleArr = newArr;\r\n    }\r\n};\r\n\r\nmodule.exports = outModule;"]}
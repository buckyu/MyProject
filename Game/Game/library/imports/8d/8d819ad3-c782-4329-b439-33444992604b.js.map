{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Data\\UserRole/assets\\Script\\Data\\UserRole\\UserRoleFactory.js"],"names":["outModule","local","RandomNameTool","require","buildFunc","userRole","getSaveData","createUserRole","randomData","_name","name","_attack","attack","_def","def","_command","command","_intelligence","intelligence","_charm","charm","_politics","politics","_maxHp","hp","_sex","sex","_moveSpeed","moveSpeed","_presonSkillId","presonSkillId","_battleSkillId","battleSkillId","_equipAttack","undefined","_equipDef","_equipJewelry","_equipHorse","_nowHp","_id","g_GameGlobalManager","getNewPersonId","_pos","cityId","g_JsonDataTool","getDataById","num","buildingId","_homePos","_goalCityMapPos","_nowMapPos","_goalCityId","_nowAction","_itemArr","_money","_power","g_GlobalData","MAX_POWER","_maxItemId","_inInBattle","_updateFuncArr","createUserRoleBySaveData","saveData","getRandomUserRoleData","SEX_MAN","getRandomName","Math","ceil","cc","random0To1","module","exports"],"mappings":"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","file":"UserRoleFactory.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Data\\UserRole","sourcesContent":["var outModule = {};\r\nvar local = {};\r\nvar RandomNameTool = require('RandomNameTool');\r\n\r\n/**\r\n * 绑定函数\r\n */\r\nlocal.buildFunc = function (userRole) {\r\n    //获取存储的数据\r\n    userRole.getSaveData = function () {\r\n\r\n    };\r\n};\r\n\r\n/**\r\n * 新建一个主角数据\r\n * 会有一个随机主角属性的功能\r\n */\r\nlocal.createUserRole = function (randomData) {\r\n    //名字\r\n    this._name = randomData.name;\r\n    //攻击力\r\n    this._attack = randomData.attack;\r\n    //防御力\r\n    this._def = randomData.def;\r\n    //统帅\r\n    this._command = randomData.command;\r\n    //智力\r\n    this._intelligence = randomData.intelligence;\r\n    //魅力\r\n    this._charm = randomData.charm;\r\n    //政治\r\n    this._politics = randomData.politics;\r\n    //生命值\r\n    this._maxHp = randomData.hp;\r\n    //性别\r\n    this._sex = randomData.sex;\r\n    //大地图移动速度\r\n    this._moveSpeed = randomData.moveSpeed;\r\n    //个人技能\r\n    this._presonSkillId = randomData.presonSkillId || 1;\r\n    //TODO 需要新建一个技能\r\n\r\n    //战争技能\r\n    this._battleSkillId = randomData.battleSkillId || 1;\r\n    //TODO 需要新建一个技能 \r\n\r\n    //这边是存储的配置\r\n    //武器装备\r\n    this._equipAttack = undefined;\r\n    //防御装备\r\n    this._equipDef = undefined;\r\n    //首饰\r\n    this._equipJewelry = undefined;\r\n    //坐骑\r\n    this._equipHorse = undefined;\r\n    //血量\r\n    this._nowHp = this._maxHp;\r\n    //唯一id\r\n    this._id = g_GameGlobalManager.getNewPersonId();\r\n    //位置\r\n    //初始都是在家的\r\n    this._pos = {\r\n        cityId: g_JsonDataTool.getDataById('_table_Game_userRandomData', 1).num || 1,\r\n        buildingId: -1\r\n    };\r\n    //家的位置，是一个城市id\r\n    this._homePos = this._pos.cityId;\r\n    //目的地的大地图坐标\r\n    this._goalCityMapPos = undefined;\r\n    //当前人物所在的大地图坐标\r\n    this._nowMapPos = undefined;\r\n    //目标城市的id\r\n    this._goalCityId = undefined;\r\n    //当前执行的任务\r\n    this._nowAction = undefined;\r\n    //当前的人物的物品数据\r\n    this._itemArr = [];\r\n    //货币数量\r\n    //初始的时候给玩家一点\r\n    this._money = g_JsonDataTool.getDataById('_table_Game_userRandomData', 9).num;\r\n    //体力\r\n    this._power = g_GlobalData.MAX_POWER;\r\n    //标记物品id的最大值\r\n    this._maxItemId = 1;\r\n    //是否在战斗中\r\n    //暂定是不记录战斗信息\r\n    this._inInBattle = false;\r\n    //回调列表\r\n    //这么设计是主角比较特殊，可能存在多个要处理的状态，标记太多不好\r\n    //比如在自宅休息的时候会存入一个回调，每次调用的时候更新人物的体力和生命值\r\n    this._updateFuncArr = [];\r\n\r\n    local.buildFunc(this);\r\n};\r\n\r\n/**\r\n * 根据存储的数据新建一个主角数据\r\n */\r\nlocal.createUserRoleBySaveData = function (saveData) {\r\n\r\n};\r\n\r\n/**\r\n * 获取一个玩家角色的随机数据\r\n * 性别和名字需要外部传入一个确定值\r\n */\r\noutModule.getRandomUserRoleData = function (sex, name) {\r\n    var randomData = {};\r\n    randomData.sex = sex || g_GlobalData.SEX_MAN;\r\n    randomData.name = name || RandomNameTool.getRandomName(randomData.sex);\r\n    //随机数据\r\n    randomData.attack = g_JsonDataTool.getDataById('_table_Game_userRandomData', 2).num +\r\n        Math.ceil(cc.random0To1() * (100 - g_JsonDataTool.getDataById('_table_Game_userRandomData', 2).num));\r\n    randomData.def = g_JsonDataTool.getDataById('_table_Game_userRandomData', 3).num +\r\n        Math.ceil(cc.random0To1() * (100 - g_JsonDataTool.getDataById('_table_Game_userRandomData', 3).num));\r\n    randomData.command = g_JsonDataTool.getDataById('_table_Game_userRandomData', 4).num +\r\n        Math.ceil(cc.random0To1() * (100 - g_JsonDataTool.getDataById('_table_Game_userRandomData', 4).num));\r\n    randomData.intelligence = g_JsonDataTool.getDataById('_table_Game_userRandomData', 5).num +\r\n        Math.ceil(cc.random0To1() * (100 - g_JsonDataTool.getDataById('_table_Game_userRandomData', 5).num));\r\n    randomData.charm = g_JsonDataTool.getDataById('_table_Game_userRandomData', 6).num +\r\n        Math.ceil(cc.random0To1() * (100 - g_JsonDataTool.getDataById('_table_Game_userRandomData', 6).num));\r\n    randomData.politics = g_JsonDataTool.getDataById('_table_Game_userRandomData', 7).num +\r\n        Math.ceil(cc.random0To1() * (100 - g_JsonDataTool.getDataById('_table_Game_userRandomData', 7).num));\r\n    randomData.hp = g_JsonDataTool.getDataById('_table_Game_userRandomData', 8).num +\r\n        Math.ceil(cc.random0To1() * (1000 - g_JsonDataTool.getDataById('_table_Game_userRandomData', 8).num));\r\n    randomData.moveSpeed = 5;\r\n    return randomData;\r\n};\r\n\r\noutModule.createUserRole = function (saveData, randomData) {\r\n    if (saveData) {\r\n        return new local.createUserRoleBySaveData(saveData);\r\n    }\r\n    return new local.createUserRole(randomData || outModule.getRandomUserRoleData());\r\n};\r\n\r\nmodule.exports = outModule;"]}
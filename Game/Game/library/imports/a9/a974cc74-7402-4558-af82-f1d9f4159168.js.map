{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Module\\GameTool/assets\\Script\\Module\\GameTool\\GameTool.js"],"names":["outModule","local","judgeEqualPos","pos_1","pos_2","x","y","buildPos","getNearBuildingCity","buildingId","nowCityId","nowCityData","personData","nowMapPos","_nowMapPos","g_GameGlobalManager","gameData","getCityById","getBuildingById","_cityPos","_homePos","hasBuildingCityArr","_allCityArr","filter","oneCityData","i","len","minDis","dis","returnCityData","length","cityData","getCityDis","cityId_1","cityId_2","cityData_1","cityData_2","Math","sqrt","module","exports"],"mappings":"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","file":"GameTool.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Module\\GameTool","sourcesContent":["/**\r\n * 这边封装了很多游戏内用的函数\r\n */\r\nvar outModule = {};\r\nvar local = {};\r\n\r\n/**\r\n * 判断两个二位数组的坐标是否相同\r\n * @param pos_1\r\n * @param pos_2\r\n */\r\noutModule.judgeEqualPos = (pos_1, pos_2) => {\r\n    if (!pos_1 || !pos_2) {\r\n        return false;\r\n    }\r\n    return pos_1.x === pos_2.x && pos_1.y === pos_2.y;\r\n};\r\n\r\n/**\r\n * 新建一个二维坐标\r\n */\r\noutModule.buildPos = (x, y) => {\r\n    return {\r\n        x: x,\r\n        y: y\r\n    }\r\n};\r\n\r\n/**\r\n * 获取一个最近的拥有指定id建筑的城市数据\r\n * @param buildingId 建筑id\r\n * @param nowCityId 出发城市id\r\n * @param nowCityData 出发城市的数据\r\n * @param personData \r\n */\r\noutModule.getNearBuildingCity = (buildingId, nowCityId, nowCityData, personData) => {\r\n    let nowMapPos;\r\n    if (nowCityId === -1) {\r\n        nowMapPos = personData._nowMapPos;\r\n    } else {\r\n        nowCityData = nowCityData || g_GameGlobalManager.gameData.getCityById(nowCityId);\r\n        if (nowCityData.getBuildingById(buildingId)) {\r\n            return nowCityData;\r\n        }\r\n        nowMapPos = nowCityData._cityPos;\r\n    }\r\n    if (buildingId === -1) {\r\n        return g_GameGlobalManager.gameData.getCityById(personData._homePos);\r\n    }\r\n    let hasBuildingCityArr = g_GameGlobalManager.gameData._allCityArr.filter((oneCityData) => {\r\n        return oneCityData.getBuildingById(buildingId);\r\n    });\r\n    let i, len, minDis = -1, dis, returnCityData;\r\n    for (i = 0, len = hasBuildingCityArr.length; i < len; i++) {\r\n        let cityData = hasBuildingCityArr[i];\r\n        dis = (cityData._cityPos.x - nowMapPos.x) * (cityData._cityPos.x - nowMapPos.x) +\r\n            (cityData._cityPos.y - nowMapPos.y) * (cityData._cityPos.y - nowMapPos.y);\r\n        if (minDis === -1 || minDis > dis) {\r\n            minDis = dis;\r\n            returnCityData = cityData;\r\n        }\r\n    }\r\n    return returnCityData;\r\n};\r\n\r\n/**\r\n * 获取两个城市之间的距离\r\n * @param cityId_1\r\n * @param cityId_2\r\n */\r\noutModule.getCityDis = (cityId_1, cityId_2) => {\r\n    let cityData_1, cityData_2;\r\n    cityData_1 = g_GameGlobalManager.gameData.getCityById(cityId_1);\r\n    cityData_2 = g_GameGlobalManager.gameData.getCityById(cityId_2);\r\n    return Math.sqrt((cityData_1._cityPos.x - cityData_2._cityPos.x) * (cityData_1._cityPos.x - cityData_2._cityPos.x) +\r\n        (cityData_1._cityPos.y - cityData_2._cityPos.y) * (cityData_1._cityPos.y - cityData_2._cityPos.y));\r\n};\r\n\r\nmodule.exports = outModule;"]}
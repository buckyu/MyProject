{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Data\\Building/assets\\Script\\Data\\Building\\BuildingFactory.js"],"names":["outModule","local","buildingUserUseTypeFunc","buildingUseTypeFunc","forest","personData","pool","hotel","shop","sellGood","g_LogTool","showLog","_name","hospital","_nowHp","_maxHp","buildFunc","building","useBuilding","isUser","_useType","undefined","createOneBuildingBySaveData","saveData","createOneBuilding","buildingId","_id","parseInt","jsonData","g_JsonDataTool","getDataById","_personArr","name","useType","module","exports"],"mappings":";;;;;;AAAA;;;AAGA,IAAIA,YAAY,EAAhB;AACA,IAAIC,QAAQ,EAAZ;;AAEA;AACAA,MAAMC,uBAAN,GAAgC,EAAhC;AACA;AACAD,MAAME,mBAAN,GAA4B,EAA5B;;AAEA;AACA;;;AAGAF,MAAMC,uBAAN,CAA8BE,MAA9B,GAAuC,UAAUC,UAAV,EAAsB,CAE5D,CAFD;AAGA;;;AAGAJ,MAAMC,uBAAN,CAA8BI,IAA9B,GAAqC,UAAUD,UAAV,EAAsB,CAE1D,CAFD;AAGA;;;AAGAJ,MAAMC,uBAAN,CAA8BK,KAA9B,GAAsC,UAAUF,UAAV,EAAsB,CAE3D,CAFD;AAGA;;;AAGAJ,MAAMC,uBAAN,CAA8BM,IAA9B,GAAqC,UAAUH,UAAV,EAAsB;AACvD;AACAA,aAAWI,QAAX;AACAC,YAAUC,OAAV,CAAqBN,WAAWO,KAAhC;AACH,CAJD;AAKA;;;AAGAX,MAAMC,uBAAN,CAA8BW,QAA9B,GAAyC,UAAUR,UAAV,EAAsB;AAC3DA,aAAWS,MAAX,GAAoBT,WAAWU,MAA/B;AACAL,YAAUC,OAAV,CAAqBN,WAAWO,KAAhC;AACH,CAHD;;AAKA;;;AAGAX,MAAMe,SAAN,GAAkB,UAAUC,QAAV,EAAoB;AAClC;AACA;;;;AAIAA,WAASC,WAAT,GAAuB,UAAUb,UAAV,EAAsBc,MAAtB,EAA8B;AACjD,QAAIA,MAAJ,EAAY;AACR,aAAOlB,MAAME,mBAAN,CAA0Bc,SAASG,QAAnC,IAA+CnB,MAAME,mBAAN,CAA0Bc,SAASG,QAAnC,EAA6Cf,UAA7C,CAA/C,GAA0GgB,SAAjH;AACH;AACD,WAAOpB,MAAMC,uBAAN,CAA8Be,SAASG,QAAvC,IAAmDnB,MAAMC,uBAAN,CAA8Be,SAASG,QAAvC,EAAiDf,UAAjD,CAAnD,GAAkHgB,SAAzH;AACH,GALD;AAMH,CAZD;;AAcA;;;AAGApB,MAAMqB,2BAAN,GAAoC,UAAUC,QAAV,EAAoB;;AAEpDtB,QAAMe,SAAN,CAAgB,IAAhB;AACH,CAHD;;AAKA;;;;AAIAf,MAAMuB,iBAAN,GAA0B,UAAUC,UAAV,EAAsB;;AAE5C,OAAKC,GAAL,GAAWC,SAASF,UAAT,CAAX;AACA;AACA,MAAIG,WAAWC,eAAeC,WAAf,CAA2B,0BAA3B,EAAuDL,UAAvD,CAAf;AACA;AACA,OAAKM,UAAL,GAAkB,EAAlB;AACA;AACA,OAAKnB,KAAL,GAAagB,SAASI,IAAtB;AACA;AACA,OAAKZ,QAAL,GAAgBQ,SAASK,OAAzB;;AAEAhC,QAAMe,SAAN,CAAgB,IAAhB;AACH,CAbD;;AAeA;;;;AAIAhB,UAAUwB,iBAAV,GAA8B,UAACC,UAAD,EAAaF,QAAb,EAA0B;AACpD,MAAIA,QAAJ,EAAc;AACV,WAAO,IAAItB,MAAMqB,2BAAV,CAAsCC,QAAtC,CAAP;AACH;AACD,SAAO,IAAItB,MAAMuB,iBAAV,CAA4BC,UAA5B,CAAP;AACH,CALD;;AAOAS,OAAOC,OAAP,GAAiBnC,SAAjB","file":"BuildingFactory.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Data\\Building","sourcesContent":["/**\r\n * 城市数据工厂\r\n */\r\nvar outModule = {};\r\nvar local = {};\r\n\r\n//玩家进入建筑的处理函数\r\nlocal.buildingUserUseTypeFunc = {};\r\n//NPC进入建筑的处理函数\r\nlocal.buildingUseTypeFunc = {};\r\n\r\n//森林\r\n/**\r\n * 森林处理函数\r\n */\r\nlocal.buildingUserUseTypeFunc.forest = function (personData) {\r\n\r\n};\r\n/**\r\n * 池塘处理函数\r\n */\r\nlocal.buildingUserUseTypeFunc.pool = function (personData) {\r\n\r\n};\r\n/**\r\n * 旅舍处理函数\r\n */\r\nlocal.buildingUserUseTypeFunc.hotel = function (personData) {\r\n\r\n};\r\n/**\r\n * 商店处理函数\r\n */\r\nlocal.buildingUserUseTypeFunc.shop = function (personData) {\r\n    //会出售所有的商品\r\n    personData.sellGood();\r\n    g_LogTool.showLog(`${personData._name} 卖东西`);\r\n};\r\n/**\r\n * 医馆处理函数\r\n */\r\nlocal.buildingUserUseTypeFunc.hospital = function (personData) {\r\n    personData._nowHp = personData._maxHp;\r\n    g_LogTool.showLog(`${personData._name} 医馆治疗`);\r\n};\r\n\r\n/**\r\n * @param building 为建筑数据绑定相应的函数\r\n */\r\nlocal.buildFunc = function (building) {\r\n    //使用建筑\r\n    /**\r\n     * @param personData 使用者\r\n     * @param isUser 是否是玩家使用\r\n     */\r\n    building.useBuilding = function (personData, isUser) {\r\n        if (isUser) {\r\n            return local.buildingUseTypeFunc[building._useType] ? local.buildingUseTypeFunc[building._useType](personData) : undefined;\r\n        }\r\n        return local.buildingUserUseTypeFunc[building._useType] ? local.buildingUserUseTypeFunc[building._useType](personData) : undefined;\r\n    };\r\n};\r\n\r\n/**\r\n * @param saveData 存储的数据\r\n */\r\nlocal.createOneBuildingBySaveData = function (saveData) {\r\n\r\n    local.buildFunc(this);\r\n};\r\n\r\n/**\r\n * @param buildingId 建筑id\r\n * 新建一个城市数据\r\n */\r\nlocal.createOneBuilding = function (buildingId) {\r\n\r\n    this._id = parseInt(buildingId);\r\n    //配置数据\r\n    var jsonData = g_JsonDataTool.getDataById('_table_building_building', buildingId);\r\n    //在这个建筑的人\r\n    this._personArr = [];\r\n    //名称\r\n    this._name = jsonData.name;\r\n    //调用函数\r\n    this._useType = jsonData.useType;\r\n\r\n    local.buildFunc(this);\r\n};\r\n\r\n/**\r\n * @param buildingId\r\n * @param saveData \r\n */\r\noutModule.createOneBuilding = (buildingId, saveData) => {\r\n    if (saveData) {\r\n        return new local.createOneBuildingBySaveData(saveData);\r\n    }\r\n    return new local.createOneBuilding(buildingId);\r\n};\r\n\r\nmodule.exports = outModule;"]}
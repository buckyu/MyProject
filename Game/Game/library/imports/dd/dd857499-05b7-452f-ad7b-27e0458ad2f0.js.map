{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\Script\\Module\\GameSave/assets\\Script\\Module\\GameSave\\GameSave.js"],"names":["outModule","local","MAX_SAVE_NUM","getSaveData","index","jsonStr","cc","sys","localStorage","getItem","JSON","parse","saveGameData","jsonData","setItem","stringify","saveGame","gameData","g_GameGlobalManager","undefined","getSaveJsonData","useGameSaveData","saveData","require","createOneGame","setGameData","module","exports"],"mappings":";;;;;;AAAA,IAAIA,YAAY,EAAhB;AACA,IAAIC,QAAQ,EAAZ;;AAEA;AACA;AACAD,UAAUE,YAAV,GAAyB,EAAzB;;AAEA;;;;AAIAD,MAAME,WAAN,GAAoB,UAACC,KAAD,EAAW;AAC3B,QAAIC,UAAUD,QAAQE,GAAGC,GAAH,CAAOC,YAAP,CAAoBC,OAApB,gBAAyCL,KAAzC,CAAR,GAA4DE,GAAGC,GAAH,CAAOC,YAAP,CAAoBC,OAApB,CAA4B,WAA5B,CAA1E;AACA,WAAOC,KAAKC,KAAL,CAAWN,OAAX,CAAP;AACH,CAHD;;AAKA;;;;AAIAJ,MAAMW,YAAN,GAAqB,UAACR,KAAD,EAAQS,QAAR,EAAqB;AACtC;AACA,QAAIT,KAAJ,EAAW;AACP,YAAIA,QAAQJ,UAAUE,YAAtB,EAAoC;AAChC;AACH;AACDI,WAAGC,GAAH,CAAOC,YAAP,CAAoBM,OAApB,gBAAyCV,KAAzC,EAAkDM,KAAKK,SAAL,CAAeF,QAAf,CAAlD;AACH,KALD,MAKO;AACHP,WAAGC,GAAH,CAAOC,YAAP,CAAoBM,OAApB,CAA4B,WAA5B,EAAyCJ,KAAKK,SAAL,CAAeF,QAAf,CAAzC;AACH;AACJ,CAVD;;AAYA;;;AAGAb,UAAUgB,QAAV,GAAqB,YAAY;AAC7B;AACA,QAAIC,WAAWC,oBAAoBD,QAAnC;AACAhB,UAAMW,YAAN,CAAmBO,SAAnB,EAA8BF,SAASG,eAAT,EAA9B;AACH,CAJD;;AAMA;;;;AAIApB,UAAUqB,eAAV,GAA4B,YAAY;AACpC,QAAIC,WAAWrB,MAAME,WAAN,EAAf;AACA,QAAI,CAACmB,QAAL,EAAe;AACX,eAAO,KAAP;AACH;AACDJ,wBAAoBD,QAApB,GAA+BM,QAAQ,aAAR,EAAuBC,aAAvB,CAAqCF,QAArC,CAA/B;AACAJ,wBAAoBD,QAApB,CAA6BQ,WAA7B,CAAyCH,QAAzC;AACA,WAAO,IAAP;AACH,CARD;;AAUAI,OAAOC,OAAP,GAAiB3B,SAAjB","file":"GameSave.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\Script\\Module\\GameSave","sourcesContent":["var outModule = {};\r\nvar local = {};\r\n\r\n//记住，有一个是自动的存储位置\r\n//提供给玩家的存储位置是10个\r\noutModule.MAX_SAVE_NUM = 10;\r\n\r\n/**\r\n * 获取游戏存储的对象\r\n * @param index 存储的index\r\n */\r\nlocal.getSaveData = (index) => {\r\n    let jsonStr = index ? cc.sys.localStorage.getItem(`game_save_${index}`) : cc.sys.localStorage.getItem('auto_save');\r\n    return JSON.parse(jsonStr);\r\n};\r\n\r\n/**\r\n * 保存游戏\r\n * @param index 存储的index，不传表示自动存储\r\n */\r\nlocal.saveGameData = (index, jsonData) => {\r\n    //存成一个json数据\r\n    if (index) {\r\n        if (index > outModule.MAX_SAVE_NUM) {\r\n            return;\r\n        }\r\n        cc.sys.localStorage.setItem(`game_save_${index}`, JSON.stringify(jsonData));\r\n    } else {\r\n        cc.sys.localStorage.setItem('auto_save', JSON.stringify(jsonData));\r\n    }\r\n};\r\n\r\n/**\r\n * 储存游戏数据\r\n */\r\noutModule.saveGame = function () {\r\n    return;\r\n    let gameData = g_GameGlobalManager.gameData;\r\n    local.saveGameData(undefined, gameData.getSaveJsonData());\r\n};\r\n\r\n/**\r\n * 使用存档\r\n * 会返回一个是否存在存档\r\n */\r\noutModule.useGameSaveData = function () {\r\n    let saveData = local.getSaveData();\r\n    if (!saveData) {\r\n        return false;\r\n    }\r\n    g_GameGlobalManager.gameData = require('GameFactory').createOneGame(saveData);\r\n    g_GameGlobalManager.gameData.setGameData(saveData);\r\n    return true;\r\n};\r\n\r\nmodule.exports = outModule;"]}